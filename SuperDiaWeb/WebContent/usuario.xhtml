<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<title>Usuários</title>
	<h:outputStylesheet library="css" name="style.css" />
</h:head>

<h:body>
	<div id="conteudo">
		<h:form id="cadastro">
			<h2>
				<h:outputText value="Adicionar usuário"
					rendered="#{empty usuarioMB.usuario.id}" />
				<h:outputText value="Adicionar usuário"
					rendered="#{not empty usuarioMB.usuario.id}" />
			</h2>
			<fieldset>
				<h:outputText value="Logado como: #{usuarioMB.userLogado.usuario} "
				rendered="#{not empty usuarioMB.userLogado.usuario}"/>
				<h:commandLink action="#{usuarioMB.logout}" value="Sair"/>
				<h:outputText value=" | "/>
				<h:commandLink action="#{loginMB.index}" value="Menu"/>
				<br/><br/>
				<legend>Dados do Usuário</legend>
				<h:outputLabel value="Login: "/>
				<h:inputText value="#{usuarioMB.usuario.usuario}"/>
				<br/>
				<h:outputLabel value="Senha: "/>
				<h:inputText value="#{usuarioMB.usuario.senha}"/>
				<br/><br/>
				<h:commandButton value="Adicionar" action="#{usuarioMB.adiciona}">
					<f:ajax execute="@form" render=":lista :cadastro"></f:ajax>
				</h:commandButton>
			</fieldset>
			<div id="lista">
				<h:outputLabel value="Lista de usuários:"></h:outputLabel>
				<h:dataTable value="#{usuarioMB.usuarios}" var="usuario" styleClass="dados" rowClasses="impar,par">
					<h:column>
						<f:facet name="header">Usuário</f:facet>
						<h:outputText value="#{usuario.usuario}"/>
					</h:column>
					
					<h:column>
						<f:facet name="header">Senha</f:facet>
						<h:outputText value="#{usuario.senha}"/>
					</h:column>
					
					
					<h:column>
						<f:facet name="header">Remover</f:facet>
						<h:commandLink action="#{usuarioMB.remove(usuario)}" value="remove" styleClass="btn btn-danger"/>
					</h:column>
					
					<h:column>
						<f:facet name="header">Alterar</f:facet>
						<h:commandLink value="Alterar" styleClass="btn">
							<f:setPropertyActionListener value="#{usuario}" target="#{usuarioMB.usuario}" />
							<f:ajax render=":cadastro"></f:ajax>
						</h:commandLink>
					</h:column>
					<br/>
				</h:dataTable>
			</div>
		</h:form>
	</div>
</h:body>
</html>
